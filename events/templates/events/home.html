{% extends 'layout.html' %}
{% block content %}

<section class="bg-white py-12 border-b">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row items-center">
        <div class="md:w-1/2 mb-8 md:mb-0">
            <h1 class="text-5xl font-extrabold text-gray-900 leading-tight mb-4">
                Find your next <span class="text-orange-600">Events</span> near you.
            </h1>
            <p class="text-xl text-gray-600 mb-6">Discover events, workshops, and local meetups in Nepal.</p>
            
            
        </div>
    </div>
</section>

<section class="max-w-7xl mx-auto px-4 py-16">
    <div class="flex justify-between items-end mb-8">
        <div>
            <h2 class="text-3xl font-bold text-gray-900">Explore Events</h2>
            <p class="text-gray-500 mt-1">Check out what's happening around you.</p>
        </div>
        <a href="{% url 'explore' %}" class="text-orange-600 font-bold hover:text-orange-700 transition flex items-center">
            See all events <i class="bi bi-arrow-right ml-2"></i>
        </a>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {% for event in events %}
            {% include 'events/event_card.html' %}
        {% empty %}
            <div class="col-span-full text-center py-20 bg-gray-50 rounded-3xl border border-dashed border-gray-300">
                <i class="bi bi-calendar-x text-5xl text-gray-300 mb-4 block"></i>
                <p class="text-gray-500 text-lg">No events found at the moment.</p>
                <a href="{% url 'create_event' %}" class="text-orange-600 font-bold mt-2 inline-block">Be the first to post one!</a>
            </div>
        {% endfor %}
    </div>
</section>

<script>
    // Initialize the map centered on Kathmandu
    var map = L.map('map').setView([27.7172, 85.3240], 13);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Center map on user's location if available
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
            var lat = position.coords.latitude;
            var lng = position.coords.longitude;
            map.setView([lat, lng], 14);
            L.circle([lat, lng], {
                radius: 300, 
                color: '#ea580c', // orange-600
                fillColor: '#ea580c',
                fillOpacity: 0.2
            }).addTo(map).bindPopup("<b>You are here</b>").openPopup();
        });
    }
</script>

{% endblock %}