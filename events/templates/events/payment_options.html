{% extends 'layout.html' %}
{% block content %}

<section class="max-w-3xl mx-auto px-4 py-12">
    <div class="bg-white rounded-3xl shadow-xl overflow-hidden border border-gray-100">
        <div class="bg-gray-50 p-8 border-b border-gray-100 flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-extrabold text-gray-900">Checkout</h1>
                <p class="text-gray-500">{{ event.title }}</p>
            </div>
            <div class="text-right">
                <p class="text-xs font-bold uppercase text-gray-400">Total Amount</p>
                <p class="text-3xl font-black text-orange-600">Rs. {{ event.ticket_price }}</p>
            </div>
        </div>

        <div class="p-8">
            <h2 class="text-lg font-bold mb-6">Select Payment Method</h2>

            <form action="{% url 'process_payment' event.id %}" method="POST" class="space-y-4">
                {% csrf_token %}
                
                <label class="flex items-center p-4 border-2 border-gray-100 rounded-2xl cursor-pointer hover:border-green-500 transition-all has-[:checked]:border-green-500 has-[:checked]:bg-green-50/30">
                    <input type="radio" name="payment_method" value="esewa" class="hidden" checked>
                    <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center mr-4">
                        <span class="text-green-600 font-bold">e</span>
                    </div>
                    <div class="flex-grow">
                        <p class="font-bold text-gray-800">eSewa Mobile Wallet</p>
                        <p class="text-xs text-gray-500">Pay using your eSewa account</p>
                    </div>
                    <i class="bi bi-check-circle-fill text-green-500 opacity-0 transition-opacity"></i>
                </label>

                <label class="flex items-center p-4 border-2 border-gray-100 rounded-2xl cursor-pointer hover:border-purple-500 transition-all has-[:checked]:border-purple-500 has-[:checked]:bg-purple-50/30">
                    <input type="radio" name="payment_method" value="khalti" class="hidden">
                    <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center mr-4">
                        <span class="text-purple-600 font-bold">K</span>
                    </div>
                    <div class="flex-grow">
                        <p class="font-bold text-gray-800">Khalti</p>
                        <p class="text-xs text-gray-500">Fast and secure digital payment</p>
                    </div>
                    <i class="bi bi-check-circle-fill text-purple-500 opacity-0 transition-opacity"></i>
                </label>

                <label class="flex items-center p-4 border-2 border-gray-100 rounded-2xl cursor-pointer hover:border-orange-500 transition-all has-[:checked]:border-orange-500 has-[:checked]:bg-orange-50/30">
                    <input type="radio" name="payment_method" value="card" class="hidden">
                    <div class="w-12 h-12 bg-gray-100 rounded-xl flex items-center justify-center mr-4">
                        <i class="bi bi-credit-card-2-back text-gray-600 text-xl"></i>
                    </div>
                    <div class="flex-grow">
                        <p class="font-bold text-gray-800">Debit / Credit Card</p>
                        <p class="text-xs text-gray-500">Visa, MasterCard, or SCT</p>
                    </div>
                    <i class="bi bi-check-circle-fill text-orange-500 opacity-0 transition-opacity"></i>
                </label>

                <button type="submit" class="w-full mt-8 bg-orange-600 text-white py-4 rounded-2xl font-bold text-lg hover:bg-orange-700 transition shadow-lg shadow-orange-200">
                    Complete Purchase
                </button>
            </form>
        </div>
    </div>
</section>

<style>
    /* Show the check icon only when the hidden radio is checked */
    input[type="radio"]:checked ~ i {
        opacity: 1 !important;
    }
</style>

{% endblock %}